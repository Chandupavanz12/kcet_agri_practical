import{u as h,c as j,r as t,a as p,j as e,L as v}from"./index-pB9rXeLh.js";function b(){const{token:r}=h(),o=j(),[i,m]=t.useState([]),[x,d]=t.useState(!0),[l,c]=t.useState(""),n="http://localhost:5001",u=t.useMemo(()=>a=>{const s=String(a||"").trim();return s?/^https?:\/\//i.test(s)?s:`${n}${s.startsWith("/")?"":"/"}${s}`:""},[n]);return t.useEffect(()=>{let a=!0;return(async()=>{try{d(!0),c("");const s=await p("/api/student/materials?access=paid&type=pdf",{token:r});if(!a)return;m(Array.isArray(s==null?void 0:s.materials)?s.materials:[])}catch(s){if(!a)return;c((s==null?void 0:s.message)||"Failed to load materials")}finally{a&&d(!1)}})(),()=>{a=!1}},[r]),x?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"card animate-pulse",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"h-6 w-56 rounded bg-slate-200"}),e.jsx("div",{className:"mt-2 h-4 w-72 rounded bg-slate-200"})]})})}):l?e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:l})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"card-body bg-gradient-to-r from-secondary-50 via-white to-accent-50",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-xl font-semibold",children:"Premium Materials"}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:"Premium-only documents. Unlock with subscription."})]}),e.jsx(v,{to:"/student/premium",className:"btn-primary text-xs",children:"View Plans"})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:i.length===0?e.jsx("div",{className:"rounded-2xl border border-slate-200/70 bg-white p-4 text-sm text-slate-700",children:"No premium materials available."}):e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:i.map(a=>e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"h-1 bg-gradient-to-r from-secondary-500 to-accent-500"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:a.subject})]}),a.locked?e.jsx("span",{className:"badge",children:"Locked"}):e.jsx("span",{className:"badge badge-success",children:"Unlocked"})]}),e.jsx("div",{className:"mt-4",children:a.locked?e.jsx("button",{type:"button",className:"btn-primary text-xs",onClick:()=>o("/student/premium"),children:"Unlock"}):e.jsx("a",{href:u(a.pdfUrl),target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-xs",children:"View"})})]})]},a.id))})})})]})}export{b as default};
