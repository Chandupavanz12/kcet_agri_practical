import{u as h,r as a,a as u,j as e,L as j}from"./index-pB9rXeLh.js";function v(){const{token:r}=h(),[i,o]=a.useState([]),[m,d]=a.useState(!0),[l,c]=a.useState(""),n="http://localhost:5001",x=a.useMemo(()=>t=>{const s=String(t||"").trim();return s?/^https?:\/\//i.test(s)?s:`${n}${s.startsWith("/")?"":"/"}${s}`:""},[n]);return a.useEffect(()=>{let t=!0;return(async()=>{try{d(!0),c("");const s=await u("/api/student/materials?access=free&type=pdf",{token:r});if(!t)return;o(Array.isArray(s==null?void 0:s.materials)?s.materials:[])}catch(s){if(!t)return;c((s==null?void 0:s.message)||"Failed to load materials")}finally{t&&d(!1)}})(),()=>{t=!1}},[r]),m?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"card animate-pulse",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"h-6 w-48 rounded bg-slate-200"}),e.jsx("div",{className:"mt-2 h-4 w-72 rounded bg-slate-200"})]})})}):l?e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:l})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"card-body bg-gradient-to-r from-primary-50 via-white to-accent-50",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-xl font-semibold",children:"Free Materials"}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:"Public notes and reference documents."})]}),e.jsx(j,{to:"/student/premium",className:"btn-primary text-xs",children:"Get Premium"})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:i.length===0?e.jsx("div",{className:"rounded-2xl border border-slate-200/70 bg-white p-4 text-sm text-slate-700",children:"No materials available."}):e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:i.map(t=>e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"h-1 bg-gradient-to-r from-accent-400 to-secondary-500"}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t.title}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:t.subject}),e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:x(t.pdfUrl),target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-xs",children:"View"})})]})]},t.id))})})})]})}export{v as default};
