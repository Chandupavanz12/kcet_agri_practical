import{u as v,r as t,a as j,j as e}from"./index-pB9rXeLh.js";function g(){const{token:d}=v(),[i,n]=t.useState([]),[m,l]=t.useState(!0),[c,h]=t.useState("");t.useEffect(()=>{let s=!0;return(async()=>{try{l(!0);const a=await j("/api/student/dashboard",{token:d});if(!s)return;n(Array.isArray(a==null?void 0:a.videos)?a.videos:[])}catch(a){if(!s)return;h((a==null?void 0:a.message)||"Failed to load videos")}finally{s&&l(!1)}})(),()=>{s=!1}},[d]);const x=s=>{const a=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/watch\?.*v=([^&\n?#]+)/];for(const r of a){const o=String(s||"").match(r);if(o)return o[1]}return null},u=s=>{const a=x(s);return a?`https://i.ytimg.com/vi/${a}/hqdefault.jpg`:null};return m?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card animate-pulse",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"h-6 w-40 rounded bg-slate-200"}),e.jsx("div",{className:"mt-2 h-4 w-72 rounded bg-slate-200"})]})}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(s=>e.jsxs("div",{className:"card animate-pulse overflow-hidden",children:[e.jsx("div",{className:"h-40 bg-slate-200"}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"h-4 w-40 rounded bg-slate-200"}),e.jsx("div",{className:"mt-2 h-3 w-24 rounded bg-slate-200"})]})]},s))})]}):c?e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:c})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"card-body bg-gradient-to-r from-primary-50 via-white to-secondary-50",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-xl font-semibold",children:"Videos"}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:"Short lessons to revise concepts quickly."})]}),e.jsx("span",{className:"badge",children:"ðŸŽ¬ Learn"})]})})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:i.length===0?e.jsx("div",{className:"rounded-2xl border border-slate-200/70 bg-white p-4 text-sm text-slate-700",children:"No videos available."}):e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:i.map(s=>{const a=u(s.videoUrl);return e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"h-1 bg-gradient-to-r from-secondary-500 to-primary-500"}),a?e.jsx("img",{src:a,alt:s.title,className:"w-full h-44 object-cover",onError:r=>{r.target.src="https://via.placeholder.com/400x225?text=Video"}}):e.jsx("div",{className:"w-full h-44 bg-slate-200"}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"font-semibold line-clamp-2 text-slate-900",children:s.title}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:s.subject}),e.jsx("a",{className:"mt-3 inline-flex items-center gap-2 text-sm text-secondary-700 hover:text-secondary-800 font-semibold",href:s.videoUrl,target:"_blank",rel:"noopener noreferrer",children:"Watch"})]})]},s.id)})})})})]})}export{g as default};
