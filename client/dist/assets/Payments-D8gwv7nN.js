import{u,r,a as h,j as e}from"./index-pB9rXeLh.js";function c(d){return(Number(d||0)/100).toLocaleString("en-IN",{style:"currency",currency:"INR"})}function j(){const{token:d}=u(),[a,m]=r.useState([]),[x,l]=r.useState(!0),[i,n]=r.useState(""),o=r.useMemo(()=>a.filter(s=>s.status==="paid"||s.status==="free").reduce((s,t)=>s+Number(t.amountPaise||0),0),[a]);return r.useEffect(()=>{let s=!0;return(async()=>{try{l(!0),n("");const t=await h("/api/admin/payments",{token:d});if(!s)return;m(Array.isArray(t==null?void 0:t.payments)?t.payments:[])}catch(t){if(!s)return;n((t==null?void 0:t.message)||"Failed to load payments")}finally{s&&l(!1)}})(),()=>{s=!1}},[d]),x?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"card animate-pulse",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"h-6 w-48 rounded bg-slate-200"}),e.jsx("div",{className:"mt-2 h-4 w-72 rounded bg-slate-200"})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"card-body bg-gradient-to-r from-primary-50 via-white to-secondary-50",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-xl font-semibold",children:"Payments"}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:"Latest premium payments (last 200)."})]}),e.jsxs("span",{className:"badge",children:["Total: ",c(o)]})]})})}),i?e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:i})})}):null,e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:a.length===0?e.jsx("div",{className:"rounded-2xl border border-slate-200/70 bg-white p-4 text-sm text-slate-700",children:"No payments yet."}):e.jsx("div",{className:"space-y-3",children:a.map(s=>e.jsx("div",{className:"rounded-2xl border border-slate-200/70 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[s.userName," (",s.userEmail,")"]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Plan: ",s.planName," (",s.planCode,")"]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Order: ",s.orderId]}),s.paymentId?e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Payment: ",s.paymentId]}):null,e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Created: ",new Date(s.createdAt).toLocaleString()]}),s.paidAt?e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Paid: ",new Date(s.paidAt).toLocaleString()]}):null]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold",children:c(s.amountPaise)}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`badge ${s.status==="paid"||s.status==="free"?"badge-success":""}`,children:s.status})})]})]})},s.id))})})})]})}export{j as default};
