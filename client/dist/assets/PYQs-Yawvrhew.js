import{u as m,r as i,j as a,a as v}from"./index-pB9rXeLh.js";import{A as b}from"./AdminCRUDPage-DdMK7M0-.js";function N(){const{token:x}=m(),[n,s]=i.useState(""),[p,l]=i.useState(""),[t,r]=i.useState("paid"),o=async(e,j)=>{const d=e.target.files[0];if(!d)return;const u=new FormData;u.append("file",d);try{const f=await v(t==="free"?"/api/admin/upload/pyq-public":"/api/admin/upload/pyq-pdf",{token:x,method:"POST",body:u,headers:{}}),y=t==="free"?f.url:f.ref;j==="pdf"?s(y):l(y)}catch(c){alert((c==null?void 0:c.message)||"Upload failed")}},h=[{name:"centre_name",label:"Exam Centre",type:"text",placeholder:"Enter exam centre name"},{name:"year",label:"Year",type:"text",placeholder:"Enter year (e.g. 2025)"},{name:"title",label:"Title",type:"text"},{name:"subject",label:"Subject",type:"text"},{name:"accessType",label:"Access",type:"select",options:[{value:"free",label:"Free (Public)"},{value:"paid",label:"Paid (Premium / Private)"}]},{name:"status",label:"Status",type:"select",options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h2",{className:"text-lg font-semibold",children:"Upload PDFs"})}),a.jsxs("div",{className:"card-body space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"label",children:"Upload as"}),a.jsxs("select",{value:t,onChange:e=>{r(e.target.value),s(""),l("")},className:"input",children:[a.jsx("option",{value:"free",children:"Free (Public)"}),a.jsx("option",{value:"paid",children:"Paid (Private)"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"label",children:"Question PDF"}),a.jsx("input",{type:"file",accept:".pdf,.png,.jpg,.jpeg,.webp,.gif,.doc,.docx,.ppt,.pptx",onChange:e=>o(e,"pdf"),className:"input"}),n&&a.jsx("div",{className:"mt-2",children:a.jsx("input",{type:"text",value:n,readOnly:!0,className:"input",onClick:e=>e.target.select()})})]}),a.jsxs("div",{children:[a.jsx("div",{className:"label",children:"Solution PDF (optional)"}),a.jsx("input",{type:"file",accept:".pdf,.png,.jpg,.jpeg,.webp,.gif,.doc,.docx,.ppt,.pptx",onChange:e=>o(e,"solution"),className:"input"}),p&&a.jsx("div",{className:"mt-2",children:a.jsx("input",{type:"text",value:p,readOnly:!0,className:"input",onClick:e=>e.target.select()})})]})]})]}),a.jsx(b,{title:"Manage PYQs",apiEndpoint:"pyqs",fields:h,initialForm:{centre_name:"",year:"",title:"",pdf_url:"",solution_url:"",subject:"General",status:"active",accessType:t||"paid"},onFormChange:e=>(e&&typeof e=="object"&&typeof e.accessType=="string"&&r(e.accessType),e),onEdit:e=>{s((e==null?void 0:e.pdf_url)||""),l((e==null?void 0:e.solution_url)||""),r((e==null?void 0:e.access_type)||(e==null?void 0:e.accessType)||"paid")},onAfterSubmit:()=>{s(""),l("")},onCancelEdit:()=>{s(""),l("")},listTransform:e=>({...e,accessType:e.accessType||e.access_type||"paid"}),formTransform:e=>({...e,pdf_url:n||e.pdf_url||"",solution_url:p||e.solution_url||"",centre_name:e.centre_name||"",year:e.year||"",access_type:e.accessType||t||"paid"})})]})}export{N as default};
