import{u as m,r as a,j as e,a as u}from"./index-pB9rXeLh.js";function N(){const{token:r}=m(),[i,d]=a.useState([]),[n,o]=a.useState(!0),[c,l]=a.useState(""),x=async(s={showLoading:!0},h=()=>!0)=>{try{l(""),s.showLoading&&o(!0);const t=await u("/api/student/dashboard",{token:r});if(!h())return;d(Array.isArray(t==null?void 0:t.notifications)?t.notifications:[])}catch(t){if(!h())return;l((t==null?void 0:t.message)||"Failed to load notifications")}finally{s.showLoading&&o(!1)}};return a.useEffect(()=>{let s=!0;return x({showLoading:!0},()=>s),()=>{s=!1}},[r]),n?e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:"Loading notifications..."})}):c?e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:c})})}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h1",{className:"text-lg font-semibold",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:"btn-ghost text-xs",onClick:()=>x({showLoading:!0}),disabled:n,children:"Refresh"}),e.jsx("button",{type:"button",className:"btn-ghost text-xs",onClick:()=>d([]),disabled:i.length===0,children:"Clear"})]})]})}),e.jsx("div",{className:"card-body space-y-3",children:i.length===0?e.jsx("div",{className:"text-sm text-slate-600",children:"No notifications."}):i.map(s=>e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-primary-50 p-3",children:[e.jsx("div",{className:"text-sm font-semibold",children:s.title}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:s.message})]},s.id))})]})})}export{N as default};
