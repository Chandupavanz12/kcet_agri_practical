import{u as v,r as t,a as m,j as s}from"./index-pB9rXeLh.js";function y(){const{token:c}=v(),[d,x]=t.useState([]),[l,h]=t.useState([]),[j,i]=t.useState(!0),[n,N]=t.useState("");t.useEffect(()=>{let e=!0;return(async()=>{try{i(!0);const[a,r]=await Promise.all([m("/api/student/results",{token:c}),m("/api/student/progress",{token:c})]);if(!e)return;x(Array.isArray(a==null?void 0:a.results)?a.results:[]),h(Array.isArray(r==null?void 0:r.points)?r.points:[])}catch(a){if(!e)return;N((a==null?void 0:a.message)||"Failed to load progress")}finally{e&&i(!1)}})(),()=>{e=!1}},[c]);const o=t.useMemo(()=>{const e=d.length,a=e?Math.round(d.reduce((r,u)=>r+Number(u.accuracy||0),0)/e*100)/100:0;return{attended:e,avgAccuracy:a}},[d]);return j?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"card animate-pulse",children:s.jsxs("div",{className:"card-body",children:[s.jsx("div",{className:"h-6 w-48 rounded bg-slate-200"}),s.jsx("div",{className:"mt-2 h-4 w-72 rounded bg-slate-200"})]})}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[1,2].map(e=>s.jsx("div",{className:"card animate-pulse",children:s.jsxs("div",{className:"card-body",children:[s.jsx("div",{className:"h-4 w-40 rounded bg-slate-200"}),s.jsx("div",{className:"mt-2 h-8 w-16 rounded bg-slate-200"})]})},e))})]}):n?s.jsx("div",{className:"card",children:s.jsx("div",{className:"card-body",children:s.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:n})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"card overflow-hidden",children:s.jsx("div",{className:"card-body bg-gradient-to-r from-primary-50 via-white to-secondary-50",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"font-display text-xl font-semibold",children:"Progress"}),s.jsx("div",{className:"mt-1 text-sm text-slate-700",children:"Track your results and improve your accuracy."})]}),s.jsx("span",{className:"badge",children:"ðŸ“ˆ Analytics"})]})})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"card overflow-hidden",children:[s.jsx("div",{className:"h-1 bg-gradient-to-r from-primary-500 to-secondary-500"}),s.jsxs("div",{className:"card-body",children:[s.jsx("div",{className:"text-sm text-slate-700",children:"Tests attended"}),s.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:o.attended})]})]}),s.jsxs("div",{className:"card overflow-hidden",children:[s.jsx("div",{className:"h-1 bg-gradient-to-r from-accent-400 to-primary-500"}),s.jsxs("div",{className:"card-body",children:[s.jsx("div",{className:"text-sm text-slate-700",children:"Average accuracy (%)"}),s.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:o.avgAccuracy})]})]})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h1",{className:"font-display text-lg font-semibold",children:"Results"})}),s.jsx("div",{className:"card-body",children:d.length===0?s.jsx("div",{className:"text-sm text-slate-600",children:"No results yet."}):s.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200/70 bg-white",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-slate-700 border-b bg-slate-50/70",children:[s.jsx("th",{className:"py-2 pr-4",children:"Test"}),s.jsx("th",{className:"py-2 pr-4",children:"Score"}),s.jsx("th",{className:"py-2 pr-4",children:"Accuracy (%)"}),s.jsx("th",{className:"py-2 pr-4",children:"Date"})]})}),s.jsx("tbody",{children:d.map(e=>s.jsxs("tr",{className:"border-b last:border-b-0",children:[s.jsx("td",{className:"py-3 pr-4 font-medium text-slate-900",children:e.testTitle}),s.jsx("td",{className:"py-2 pr-4",children:e.score}),s.jsx("td",{className:"py-2 pr-4",children:Number(e.accuracy||0)}),s.jsx("td",{className:"py-2 pr-4",children:new Date(e.date).toLocaleString()})]},e.id))})]})})})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"font-display text-lg font-semibold",children:"Recent progress points"})}),s.jsx("div",{className:"card-body",children:l.length===0?s.jsx("div",{className:"text-sm text-slate-600",children:"No progress points yet."}):s.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:l.map((e,a)=>s.jsxs("div",{className:"rounded-xl border border-slate-200 p-3",children:[s.jsx("div",{className:"text-xs text-slate-500",children:new Date(e.date).toLocaleString()}),s.jsxs("div",{className:"mt-1 text-sm",children:["Score: ",s.jsx("span",{className:"font-semibold",children:e.score})]}),s.jsxs("div",{className:"text-sm",children:["Accuracy: ",s.jsxs("span",{className:"font-semibold",children:[e.accuracy,"%"]})]})]},a))})})]})]})}export{y as default};
